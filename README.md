
# üí∞ Budget Day Limit ‚Äî Telegram Mini App

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Telegram –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞ —Ç—Ä–∞—Ç –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞—Ä–ø–ª–∞—Ç—ã.

## üöÄ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **Backend:** Node.js, Fastify, TypeScript (–í—ã–±—Ä–∞–Ω –∑–∞ –º–∏–Ω–∏–º–∞–ª–∏–∑–º –∏ —Å–∫–æ—Ä–æ—Å—Ç—å).
- **Frontend:** React 18, Vite, Tailwind CSS, Recharts.
- **DB:** PostgreSQL + Prisma ORM.
- **Telegram:** WebApp API + Telegram Bot API.
- **Deployment:** Render (Blueprints).

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `prisma/`: –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏.
- `apps/api/`: –ë—ç–∫–µ–Ω–¥ –Ω–∞ Fastify.
- `apps/miniapp/`: –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Mini App.
- `apps/admin/`: –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ—Ç–¥–µ–ª—å–Ω–æ–µ SPA).
- `packages/shared/`: –û–±—â–∏–µ —Ç–∏–ø—ã –∏ DTO.

## üõ† –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   –°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ:
   ```env
   DATABASE_URL="postgresql://user:pass@localhost:5432/budget"
   BOT_TOKEN="–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê"
   TELEGRAM_WEBAPP_URL="http://localhost:5173"
   ADMIN_JWT_SECRET="super-secret-key"
   ```
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   npm install
   ```
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ë–î (—á–µ—Ä–µ–∑ Docker –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ):**
   ```bash
   docker-compose up -d
   ```
5. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   npx prisma migrate dev
   ```
6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ dev-—Ä–µ–∂–∏–º–µ:**
   ```bash
   npm run dev:api
   npm run dev:miniapp
   npm run dev:admin
   ```

## üåç –î–µ–ø–ª–æ–π –Ω–∞ Render
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Render.
2. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç `render.yaml`.
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `BOT_TOKEN` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
4. –í BotFather —É–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Mini App (–∏–∑ —Å–µ—Ä–≤–∏—Å–∞ `budget-miniapp`).

## üí∏ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –∏ –ü–ª–∞—Ç–µ–∂–∏
–í MVP —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —ç–∫—Ä–∞–Ω "Paywall" –∏ –º–æ–¥–µ–ª—å `Subscription`. 
–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π (CloudPayments, –ÆKassa –∏–ª–∏ Telegram Stars):
1. –î–æ–±–∞–≤—å—Ç–µ `paymentProvider` –≤ `apps/api`.
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/payments/webhook`.
3. –û–±–Ω–æ–≤–ª—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ —Ç–∞–±–ª–∏—Ü–µ `Subscription` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞.

## üë• –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
–î–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ seed-—Å–∫—Ä–∏–ø—Ç (—Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `prisma/seed.ts` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npx prisma db seed` —Å –≤–∞—à–∏–º –∫–æ–¥–æ–º —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞).
–†–∞–∑–¥–µ–ª—ã –∞–¥–º–∏–Ω–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏ –∏ –≤–∏–¥–µ—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
